# STAMPsy: Towards SpatioTemporal-Aware Mixed-Type Dialogues for Psychological Counseling

Jieyi Wang1, Yue Huang1, Zeming Liu2∗, Dexuan $\mathbf { X } \mathbf { u } ^ { 1 }$ , Chuan Wang3, Xiaoming $\mathbf { S h i ^ { 4 } }$ , Ruiyuan Guan1, Hongxing Wang5, Weihua $\mathbf { Y u e } ^ { 6 }$ , Yu Huang1

1Peking University, Beijing, China 2School of Computer Science and Engineering, Beihang University, Beijing, China 3Beijing Jiaotong University, Beijing, China 4East China Normal University, Shanghai, China 5Xuanwu Hospital Capital Medical University, Beijing, China 6Peking University Sixth Hospital, Beijing, China joysw $@$ stu.pku.edu.cn, zmliu $@$ buaa.edu.cn, hy@pku.edu.cn

# Abstract

Online psychological counseling dialogue systems are trending, offering a convenient and accessible alternative to traditional in-person therapy. However, existing psychological counseling dialogue systems mainly focus on basic empathetic dialogue or QA with minimal professional knowledge and without goal guidance. In many real-world counseling scenarios, clients often seek multi-type help, such as diagnosis, consultation, therapy, console, and common questions, but existing dialogue systems struggle to combine different dialogue types naturally. In this paper, we identify this challenge as how to construct mixed-type dialogue systems for psychological counseling that enable clients to clarify their goals before proceeding with counseling. To mitigate the challenge, we collect a mixed-type counseling dialogues corpus termed STAMPsy, covering five dialogue types, taskoriented dialogue for diagnosis, knowledge-grounded dialogue, conversational recommendation, empathetic dialogue, and question answering, over 5,000 conversations. Moreover, spatiotemporal-aware knowledge enables systems to have world awareness and has been proven to affect one’s mental health. Therefore, we link dialogues in STAMPsy to spatiotemporal state and propose a spatiotemporal-aware mixedtype psychological counseling dataset. Additionally, we build baselines on STAMPsy and develop an iterative self-feedback psychological dialogue generation framework, named SelfSTAMPsy. Results indicate that clarifying dialogue goals in advance and utilizing spatiotemporal states are effective.

Datasets — https://github.com/JOY-SWang/STAMPsy

# Introduction

One in eight people worldwide is living with mental health conditions, yet the growing demand for mental health care is facing significant challenges due to insufficient resources of existing consultants(World Health Organization 2023). The uneven distribution of face-to-face counseling resources and the high cost of therapy have exacerbated the situation of mental disorders(Ierardi, Bottini, and Riva Crugnola 2022).

Thanks to the development of generative AI tools, such as Large Language Models(LLMs), online counseling is gradually becoming a good alternative to traditional face-to-face counseling (Olawade et al. 2024; Song et al. 2023).

Recent studies have leveraged LLM to aid clients in obtaining better online psychological counseling(Ke et al. 2024; Wang et al. 2023), falling into two categories: $\textcircled{1}$ taskoriented dialogues or recent LLM-based simulations in psychology theory assume that clients have explicit goals (comfort-seeking, therapy querying, etc.)(Wang et al. 2024c; Chen et al. 2023); $\textcircled{2}$ non-task dialogue-modeling approaches with pre-trained models for single-turn QA or multi-turn empathic dialogue(Liu et al. 2021a; Zheng et al. 2023). Almost none of these studies naturally mix different types of dialogue(called mixed-type dialogues). However, in realworld application scenarios, there are multiple dialogue types in psychological counseling. For example, as shown in Fig.1, the psychological counseling bots could proactively make QA or conversational recommendations after task-oriented dialogue for diagnosis to improve user experience. However, to the best of our knowledge, no previous research has been done on this challenge. To mitigate this challenge, we present a novel task, mixed-type dialogues for psychological counseling, as shown in Fig.1.

Besides, beyond verbal conversations and body language, time and environment are two important nonverbal cues that affect counseling(Sherry, Paula, and Cynthia 2009) and mental health(Woo and Postolache 2008; Levitan et al. 2019). Therefore, we delve into the spatiotemporal states for this task, leading the model to generate more worldaware answers. For recommending therapy, therapists generally give different advice for late-night insomnia and early morning awakening, relaxation exercises before bed, and avoiding long naps.

To facilitate the study of this task, we collate the first SpatioTemporal-Aware Mixed-type dialogues dataset for Psychological counseling(STAMPsy), stamped with spatiotemporal state and psychological helping skills, including five dialogue types: task-oriented dialogues for diagnosis, knowledge-grounded dialogue, conversational recommendation, empathetic dialogue, and QA, containing 5,006 dialogues and 61,832 utterances, with at least three dialogue types in each dialogue of STAMPsy. It should be noted that data processing is guided by psychological professionals. Specifically, we propose organizing the data according to the professional psychological theory of “Case Conceptualization”, including modules to gain the client’s profile and personal information, spatiotemporal state, and goal, checked by professionals. As shown in Figure 1, to help clarify the client’s goal, the therapist proactively gives recommendations like scale testing and therapies, interspersed with emotional solace. Furthermore, the counselor’s reply changes with time and environment. Although both suffer from insomnia, client #1 hopes to fall asleep, while client #2 hopes to stay alert during the day. Therefore, the counselor offers different suggestions, relaxation ways, and coffee respectively, which vividly demonstrates the effectiveness of spatiotemporal state on mixed-type dialogue.

<html><body><table><tr><td colspan="2">Dialog Type</td><td>Task-oriented Dialogue for Diagnosis</td><td>QA</td><td>Recommendation</td><td>Knowledge-grounded Dialog Empathetic Dialog</td></tr><tr><td colspan="2">Goal</td><td colspan="4">Dialogue #1: Period: late at night 24:00 p.m.; Location: Home Dialogue #2: Period: morning 6 a.m.; Location: Outdoor</td></tr><tr><td colspan="2">Diagnosis</td><td colspan="3">User#1: Im especially anxious.. It's late but Ican’'t sleep at home at all. Bot:I'msorry tohear about yourrecent anxietyandinsomniaisues...not being able tofall asleep.Let'sstart by filling out ananxiety scale toget your mental state.</td><td colspan="2">User#2:Imespeciallyanxious...It's6a.mandIdidn't sleepatallastnight. Bot:I'm sorry to hearabout your recent anxiety and insomnia issues.Senior year is really stressful and the mind tends to be sensitive. It's normal for you to feel this way.</td></tr><tr><td colspan="2">Recommend</td><td colspan="2"></td><td colspan="3"></td></tr><tr><td colspan="2">Empathetic Dialog</td><td colspan="2">User#1: Thank you. Bot: Have faith that you can fall into sweet dreamsand don't be anxious.</td><td colspan="2">User#2:Thank you. Bot:You may feel tired today,but try to give yourselfsome grace.Wish youa good day!</td></tr><tr><td colspan="2">Knowledge Grounded Dialogue</td><td colspan="5">User#1: Is there any other treatment other than what is recommended above? Bot:...I suggest we use CognitiveBehavioral Therapy tohelp youcope bettr with these dilemmas. User#1:WhatisCognitiveBehavioral Therapy? otpl challengesof reality.</td></tr><tr><td colspan="2">d</td><td colspan="5">therapy is a thera-ythatworks ay..,ithelps you SAS(Slf-Raling Anxiety tobetter cope with the challengesof reality</td></tr><tr><td colspan="2"></td><td colspan="5">meaning evaluation CBT therapy emotional state Anxiety persona female</td></tr><tr><td colspan="2"></td><td colspan="5">studenpor yuare cauise mmg.</td></tr><tr><td></td><td colspan="2"></td><td>User ）</td><td colspan="2"></td></tr></table></body></html>

To promote research on mixed-type dialogues for psychological counseling, we conduct bench-marking experiments on STAMPsy for the three sub-tasks: Helping Skills Selection, SpatialTemporal State Processing(STSP), and Adaptive Retrieval Augmented Generation. Moreover, inspired by Asai et al. (2023), we propose a novel Iterative SelfFeedback framework termed Self-STAMPsy to self-reflect on the consultation process and optimize model, imitating the supervision report and fine-tuning pre-trained dialogue models for comparison with $\textcircled{1}$ different instruction texts as input and $\textcircled{2}$ adaptive retrieval-augmented generation from knowledge graph. Experimental results also demonstrate that utilizing the above four modules improves the answers.

Our contributions are summarized as follows:

• To the best of our knowledge, we are the first to identify the new challenge that there are multiple dialogue types in psychological counseling for online clients. • To mitigate this challenge, we propose the first Chinese mixed-type dialogue dataset stamped with the spatiotemporal state and goals for psychological counseling (STAMPsy), where the spatiotemporal state of counseling is stamped to better connect the psychological dialog system with reality and explore clients’ potential emotional responses to their surroundings.

• We build baselines on STAMPsy and propose a novel iterative self-feedback framework Self-STAMPsy simulating the supervision process. Extensive experiments demonstrate that helping skill, spatiotemporal state and self-feedback retrieval can improve performance.

# Related Work Applications of LLMs in Psychology

Recently, large language models(LLMs) with professional expertise and much better inferential capability have the potential to converse like a real person(Wang et al. 2024a; Tao et al. 2024), leveraging their capabilities for tasks like reasoning and interaction. Especially in psychology, LLMs are proven capable of replacing human participants in experiments(APA 2024), like emulating human social dynamics(Park et al. 2023; Wang et al. 2024b). Therefore, we make LLMs serve as therapists and clients to generate data similar to counseling dialogues. However, previous research has mainly focused on simply establishing an identity for LLMs, with limited relative information and without considering complex scenarios in real-world counseling(Cho et al. 2023). We include the spatiotemporal state during counseling and the goal sequence of the client-counselor dialogue, which influences the client’s emotional state, and is crucial for assisting LLMs in better solving clients’ problems.

# Datasets for Mental Health Support

Research on mental health support typically relies on highquality psychologically pertinent datasets, such as ESConv (Liu et al. 2021a), AugESC(Zheng et al. 2023), CPsyCoun(Zhang et al. 2024), PsyQA(Sun et al. 2021). Although these datasets enhance the performance of LLMs in psychology, most of them mix all types of dialogues, leaving the model unable to give more targeted answers. Table 1 lists high-quality psychological and mixed-type dialogue datasets. However, they primarily focus on pure psychological counseling or cannot capture and perceive other mixed information that might be used in the counseling process. Faced with the absence of a dataset for mixed psychological counseling conversations, we proposed STAMPsy, added mixed dialogue goals to conversations, and conducted indepth research on the positive impact of the spatiotemporal state on counseling conversations. This could be the initial step towards a spatiotemporal perception of mixed dialogue similar to real-world psychological counseling.

Table 1: Comparison of STAMPsy with other datasets. “Psy.”, “S.T.-aware”, “know.”, and “rec.” stand for psychological counseling dialogue, spatiotemporal-aware knowledge, knowledge-grounded dialogue, and recommendation, respectively.   

<html><body><table><tr><td>Datasets</td><td>S.T.-aware</td><td>Mixed-type</td><td>Psy.</td><td>Dialogue Types</td></tr><tr><td>ESConv(Liu et al. 2021a)</td><td>×</td><td>×</td><td>√</td><td>Emotional response generation</td></tr><tr><td>PsyQA(Sun et al. 2021)</td><td>×</td><td>×</td><td>√</td><td>single-turn conversations for mental health support</td></tr><tr><td>AugESC(Zheng et al.2023)</td><td>×</td><td>×</td><td>√</td><td>Large emotional response generation</td></tr><tr><td>CPsyCoun(Zhang et al.2024)</td><td>×</td><td>×</td><td>√</td><td>Multi-turn dialogues with different consultation topics</td></tr><tr><td>BlendedSkillTalk(Smith 2020)</td><td>×</td><td>√</td><td>×</td><td>Know., empathetic dialogue,chitchat</td></tr><tr><td>DuRecDial 2.0(Liu et al. 2021b)</td><td>×</td><td>√</td><td>×</td><td>Rec.,chitchat,QA, task-oriented dialogue</td></tr><tr><td>DuClarifyDial(Liu et al.2022)</td><td>×</td><td>√</td><td>×</td><td>Rec., know. chitchat, QA, task-oriented dialogue</td></tr><tr><td>MidMed(Shi et al.2023)</td><td>×</td><td>√</td><td>×</td><td>Rec.,empathetic dialogue,know.,QA, diagnosis-oriented dialogue</td></tr><tr><td>DuSinc(Zhou et al. 2022)</td><td>√</td><td>×</td><td>×</td><td>Service information augmented dialogue</td></tr><tr><td>STAMPsy (Ours)</td><td>√</td><td>√</td><td>√</td><td>Rec., chitchat, know., QA, diagnosis-oriented dialogue</td></tr></table></body></html>

# Mixed-type Dialogue Systems

Recent research on mixed-type dialogue has witnessed a marked upsurge, especially in open-source datasets. Some researchers train a unified, comprehensive conversation model(Madotto et al. 2020; Roller et al. 2020), which integrates multiple dialogue skills into a singular framework by combining various single-skill conversation datasets, such as persona-chat and task-oriented dialogue. Others focus on mixed-type dialogue datasets and models, designed to aggregate diverse dialogue skills to meet specific needs, like recommending music and places, but unable to solve psychological problems(Liu et al. 2020, 2021a). Compared with them, we compiled the first mixed-type spatiotemporal dialogue dataset for psychology, which examines the effectiveness of integrating counselor helping skills and fusing spatiotemporal state in online psychological counseling.

# Dataset Collection

This paper aims to construct a spatiotemporal-aware mixedtype dialogue dataset for online psychological counseling. To more authentically reflect the patterns of real-world psychological counseling, we devise multiple modules to mimic practical counseling case report patterns. The construction flowchart is presented in Figure 2.

Data Source Given privacy concerns, it is difficult to obtain real-world consultation records. Therefore, we analyzed public cases and in-depth descriptions from popular counseling books(KAMA 2015; Sherry, Paula, and Cynthia 2009; Hill 2009). To better fit the online context, we also selected conversations from PsyQA(Sun et al. 2021), a Chinese dataset of psychological health support with the Helping Skills Theory. After collection, we filter private information, divide long cases into several meetings manually, and ultimately collect 4,000 single texts as the origin input.